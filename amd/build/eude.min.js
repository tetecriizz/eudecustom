define(["jquery","jqueryui"],function(e){return{message:function(){e("#menucategoryname").change(function(){e("#menucategoryname option:selected").each(function(){var t=e("#menucategoryname").val();e("#menucoursename").empty(),e("#menucoursename").append("<option value=''>-- Módulo --</option>"),e("#menudestinatarioname").empty(),e("#menudestinatarioname").append("<option value=''>-- Destinatario --</option>"),e.ajax({data:"catId :"+t,url:"eudemessagesrequest.php?messagecat="+t,type:"get",success:function(t,a,o){try{e("#menucoursename").append(t)}catch(e){window.console.log(e.message),window.console.log(a),window.console.log(o)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})})}),e("#menucoursename").change(function(){e("#menucoursename option:selected").each(function(){var t=e("#menucoursename").val();e("#menudestinatarioname").empty(),e("#menudestinatarioname").append("<option value=''>-- Destinatario --</option>"),e.ajax({data:"catId :"+t,url:"eudemessagesrequest.php?messagecourse="+t,type:"get",success:function(t,a,o){try{e("#menudestinatarioname").append(t)}catch(e){window.console.log(e.message),window.console.log(a),window.console.log(o)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})})})},matriculation:function(){e.datepicker.regional.es={closeText:"Cerrar",prevText:"<Ant",nextText:"Sig>",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.es),e(".date1").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var t=new Date(e(this).datepicker("getDate")),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7),n=new Date(o.getFullYear(),o.getMonth(),o.getDate()+7),s=2;e(".date1").not(":first").each(function(){switch(s){case 1:e(this).datepicker("setDate",t),s++;break;case 2:e(this).datepicker("setDate",a),s++;break;case 3:e(this).datepicker("setDate",o),s++;break;case 4:e(this).datepicker("setDate",n),s=1}})}}),e(".date2").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var t=new Date(e(this).datepicker("getDate")),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7),n=new Date(o.getFullYear(),o.getMonth(),o.getDate()+7),s=2;e(".date2").not(":first").each(function(){switch(s){case 1:e(this).datepicker("setDate",t),s++;break;case 2:e(this).datepicker("setDate",a),s++;break;case 3:e(this).datepicker("setDate",o),s++;break;case 4:e(this).datepicker("setDate",n),s=1}})}}),e(".date3").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var t=new Date(e(this).datepicker("getDate")),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7),n=new Date(o.getFullYear(),o.getMonth(),o.getDate()+7),s=2;e(".date3").not(":first").each(function(){switch(s){case 1:e(this).datepicker("setDate",t),s++;break;case 2:e(this).datepicker("setDate",a),s++;break;case 3:e(this).datepicker("setDate",o),s++;break;case 4:e(this).datepicker("setDate",n),s=1}})}}),e(".date4").first().change(function(){if(window.confirm("¿Calcular las fechas siguientes automáticamente?")){var t=new Date(e(this).datepicker("getDate")),a=new Date(t.getFullYear(),t.getMonth(),t.getDate()+7),o=new Date(a.getFullYear(),a.getMonth(),a.getDate()+7),n=new Date(o.getFullYear(),o.getMonth(),o.getDate()+7),s=2;e(".date4").not(":first").each(function(){switch(s){case 1:e(this).datepicker("setDate",t),s++;break;case 2:e(this).datepicker("setDate",a),s++;break;case 3:e(this).datepicker("setDate",o),s++;break;case 4:e(this).datepicker("setDate",n),s=1}})}}),e(".inputdate").datepicker({dateFormat:"dd/mm/yy"}).val(),e(".inputdate").each(function(){var t=new Date(e(this).datepicker("getDate")),a=new Date(e(this).datepicker("option","minDate"));t.getFullYear()==a.getFullYear()&&t.getMonth()==a.getMonth()&&t.getDate()==a.getDate()&&e(this).datepicker("setDate",null)}),e("#resetfechas").click(function(t){t.preventDefault(),e(".inputdate").each(function(){e(this).datepicker("setDate",null)})}),e("#savedates").click(function(t){var a=!1;if(e(".inputdate").each(function(){e(this).val()||(a=!0);var t=e(this).val().replace(new RegExp("/","g"),"-");e(this).val(t)}),a){t.preventDefault();window.alert("Hay campos incorrectos. Rellene correctamente todos los campos")}})},academic:function(){e("#menucoursename").hide(),e("#menustudentname").hide(),e("#usergrades").hide(),e("#menucategoryname").change(function(){e("#menucategoryname option:selected").each(function(){var t=e("#menucategoryname").val();e("#menucoursename").empty(),e("#menucoursename").append("<option value=''>-- Módulo --</option>"),e(this).val()?e("#menucoursename").show():e("#menucoursename").hide(),e("#menustudentname").empty(),e("#menustudentname").append("<option value=''>-- Alumno --</option>"),e("#menustudentname").hide(),e("#usergrades").hide(),e.ajax({data:"catId :"+t,url:"eudegradesearchrequest.php?cat="+t,type:"get",success:function(t,a,o){try{e("#menucoursename").append(t)}catch(e){window.console.log(e.message),window.console.log(a),window.console.log(o)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})})}),e("#menucoursename").change(function(){e("#menustudentname").show(),e("#usergrades").hide(),e("#menucoursename option:selected").each(function(){e(this).val()?e("#menustudentname").show():e("#menustudentname").hide(),e("#menustudentname").empty(),e("#menustudentname").append("<option value=''>-- Alumno --</option>");var t=e("#menucoursename").val();e.ajax({data:"courseId :"+t,url:"eudegradesearchrequest.php?course="+t,type:"get",success:function(t,a,o){try{e("#menustudentname").append(t)}catch(e){window.console.log(e.message),window.console.log(a),window.console.log(o)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})})}),e("#menustudentname").change(function(){e("#usergrades").show(),e(this).val()||e("#usergrades").hide(),e("#menustudentname option:selected").each(function(){var t="../../grade/report/user/index.php?userid="+e("#menustudentname").val()+"&id="+e("#menucoursename").val();e("#usergrades").attr("href",t)})})},calendar:function(){e("#modalwindowforprint").empty(),e("#openmodalwindowforprint").click(function(){e("#modalwindowforprint").empty(),e.ajax({url:"eudecalendarmodalwindow.php",type:"get",success:function(t,a,o){try{e("#modalwindowforprint").append(t),e("#closemodalwindowbutton").click(function(){e("#modalwindowforprint").empty()});e.datepicker.regional.es={closeText:"Cerrar",prevText:"<Ant",nextText:"Sig>",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.es),e(".inputdate").datepicker({dateFormat:"dd/mm/yy"}).val()}catch(e){window.console.log(e.message),window.console.log(a),window.console.log(o)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})}),e(".cb-eventkey").each(function(){e(this).click(function(){var t=e(this).prop("name");e(this).prop("checked")?e("div."+t).each(function(){e(this).removeClass("disabled"+t)}):e("div."+t).each(function(){e(this).addClass("disabled"+t)})})}),e("div.hasevent").each(function(){var t=e(this).attr("class");t.includes("eudeevent")&&e(this).parent().find("div[name='eudeglobalevent']").append(e(this)),t.includes("intensivemodulebegin")&&e(this).parent().find("div[name='intensivecourse']").append(e(this)),t.includes("testdate")&&e(this).parent().find("div[name='testsubmission']").append(e(this)),t.includes("questionnairedate")&&e(this).parent().find("div[name='questionnairedate']").append(e(this)),t.includes("activityend")&&e(this).parent().find("div[name='activitysubmission']").append(e(this)),t.includes("modulebegin")&&e(this).parent().find("div[name='normalcourse']").append(e(this))}),e("div.hasevent").on("mouseenter",function(){e(this).append("<div class='uep-wrap modal-dialog modal show modal-dialog modal-content eudecalendarpopup'><div class='uep-header header modal-header'><h3 class='modal-title' style='padding: 5px;'>Info</h3></div><div class='uep-content modal-body'>"+e(this).attr("data-core_calendar-popupcontent")+"</div></div>")}),e("div.hasevent").on("mouseleave",function(){e(this).find(".eudecalendarpopup").remove()})},eventlist:function(){e("#printeventbutton").click(function(){e(".datepickerwrapper").hide(),e("#generateeventlist").hide(),e("#printeventbutton").hide(),e("#page-footer").hide(),e("#moodle-footer").hide(),e("#mr-nav").hide(),window.print(),e(".contentwrapper").show(),e("#printeventbutton").show(),e("#page-footer").show(),e("#moodle-footer").show(),e("#mr-nav").show()});e.datepicker.regional.es={closeText:"Cerrar",prevText:"<Ant",nextText:"Sig>",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sá"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.es),e(".inputdate").datepicker({dateFormat:"dd/mm/yy"}).val(),e("#generateeventlist").click(function(t){var a=!1;if(e(".inputdate").each(function(){e(this).val()||(a=!0)}),a){t.preventDefault();window.alert("Hay campos incorrectos. Rellene correctamente todos los campos")}})},profile:function(){function t(){var t;e(".letpv_abrir").click(function(){var a=e(this).attr("id"),o=e("#hiddenuserid").attr("value");t=a.substring(a.indexOf("(")+1,a.indexOf(","));var n=a.substring(a.indexOf(",")+1,a.lastIndexOf(",")),s=a.substring(a.lastIndexOf(",")+1,a.indexOf(")"));e("#letpv_ventana-flotante").css("display","block"),e.ajax({data:"idcourse="+t,url:"eudemodaladvise.php?studentid="+o,type:"post",success:function(a,i,d){try{e("#letpv_ventana-flotante").html(a),e("button.letpv_cerrar").click(function(){e("#letpv_ventana-flotante").css("display","none")}),e("#letpv_course").attr("value",t),e("input.letpv_btn").attr("id","abrirFechas("+t+","+n+","+s+")"),e("input.letpv_btn").click(function(){e("#letpv_ventana-flotante").css("display","block"),e.ajax({data:"idcourse="+t,url:"eudemodaldates.php?studentid="+o,type:"post",success:function(a){e("#letpv_ventana-flotante").html(a),e("button.letpv_cerrar").click(function(){e("#letpv_ventana-flotante").css("display","none")}),e("#letpv_course").attr("value",t)}})})}catch(e){window.console.log(e.message),window.console.log(i),window.console.log(d)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})}),e(".abrirFechas").click(function(){var t,a=e(this).attr("id");t=a.substring(a.indexOf("(")+1,a.indexOf(","));var o=a.substring(a.indexOf(",")+1,a.lastIndexOf(","));e("#letpv_ventana-flotante").css("display","block"),e.ajax({data:"idcourse="+t,url:"eudemodaldates.php",type:"post",success:function(a,n,s){try{e("#letpv_ventana-flotante").html(a),e("button.letpv_cerrar").click(function(){e("#letpv_ventana-flotante").css("display","none")}),e("#letpv_course").attr("value",t);for(var i=e("input#letpv_course").val(),d=e(".letpv_mod"+i+" .c1 span").text(),c=e("select#menuletpv_date").children().length,r=1;r<=c;r++){d==e("select#menuletpv_date option:nth-child("+r+")").text()&&e("select#menuletpv_date option:nth-child("+r+")").attr("selected","selected")}1==o?e("#letpv_amount").attr("value","0"):2==o&&e("form#fechas").attr("action","eudeprofile.php")}catch(e){window.console.log(e.message),window.console.log(n),window.console.log(s)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})})}t(),e("#menucategoryname").change(function(){var a=e("#menucategoryname").val(),o=e("#menucategoryname").children().last().val();if(0!==a)for(var n=0;n<=o;n++)n!=a?e(".letpv_cat"+n).css("display","none"):e(".letpv_cat"+n).css("display","table-row");else for(var s=0;s<o;s++)e(".letpv_cat"+s).css("display","table-row");var i=e("#menucategoryname").val();e.ajax({data:"catId="+i,url:"eudeprofilerequest.php?profilecat="+i,type:"post",success:function(a,o,n){try{window.console.log(a),e("#letpv_student").empty(),e("#letpv_student").append(a.student),e("#letpv_tablecontainer").empty(),e("#letpv_tablecontainer").append(a.table),t()}catch(e){window.console.log(e.message),window.console.log(o),window.console.log(n)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})}),e("#letpv_student").change(function(){e("#letpv_student option:selected").each(function(){var a=e("#menucategoryname").val(),o=e(this).val();e("#letpv_tablecontainer").append("<div class='row' style='display: block;text-align: center;margin-top: 100px'><i class='fa fa-spinner fa-spin' style='font-size:120px;color:#6F1A3D'></i></div>"),e.ajax({data:"catId="+a,url:"eudeprofilerequest.php?profilecat="+a+"&profilestudent="+o,type:"post",success:function(a,o,n){try{e("#letpv_tablecontainer").empty(),e("#letpv_tablecontainer").append(a),t()}catch(e){window.console.log(e.message),window.console.log(o),window.console.log(n)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})})});for(var a=e("#categoryselect").text(),o=e("#menucategoryname option").length,n=0;n<=o;n++)a==e("#menucategoryname option:nth-child("+n+")").text()&&e("#menucategoryname option:nth-child("+n+")").attr("selected","selected");var s=e("#menucategoryname").val(),i=e("#menucategoryname").children().last().val();if(0!==s)for(n=0;n<=i;n++)n!=s?e(".letpv_cat"+n).css("display","none"):e(".letpv_cat"+n).css("display","table-row");else for(var d=0;d<i;d++)e(".letpv_cat"+d).css("display","table-row");e.ajax({data:"catId="+s,url:"eudeprofilerequest.php?profilecat="+s,type:"post",success:function(a,o,n){try{window.console.log(a),e("#letpv_tablecontainer").empty(),e("#letpv_tablecontainer").append(a.table),t()}catch(e){window.console.log(e.message),window.console.log(o),window.console.log(n)}},error:function(e,t,a){window.console.log(e.responseText),window.console.log(t),window.console.log(a)}})},redirect:function(){e(".linkselect").change(function(){var t=e(this).attr("course"),a=e(this).attr("notice");switch(e(this).val()){case"1":window.location.href="../../mod/forum/view.php?f="+a;break;case"2":window.location.href="../../mod/forum/index.php?id="+t;break;case"3":window.location.href="../../mod/assign/index.php?id="+t}})},menu:function(){e(document).ready(function(){var t=window.location.href.split("?"),a=window.location.pathname;"/local/eudecustom/eudeprofile.php"!=a&&"/local/eudecustom/eudegradesearch.php"!=a||e(".menulateral .icon-menu a:nth-child(2) li").addClass("selected"),"/local/eudecustom/eudeteachercontrolpanel.php"!=a&&"/grade/report/overview/index.php"!=a||e(".menulateral .icon-menu a:nth-child(3) li").addClass("selected");for(var o=2;o<8;o++){var n=e(".menulateral .icon-menu a:nth-child("+o+")").attr("href").split("?");t[0]==n[0]&&e(".menulateral .icon-menu a:nth-child("+o+") li").addClass("selected")}})},payment:function(){e(document).ready(function(){e("body").css("display","none"),e("#id_submitbutton").click()})},dashboard:function(){e(document).ready(function(){e("button.dashboardbtntotal").on("click",function(){e("div.dashboardcoursebox").show(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnincourse").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.incourse")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnfailed").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.failed")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnpassed").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.passed")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnconvalidated").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.convalidated")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnpending").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.pending")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnteachertotal").on("click",function(){e("div.dashboardcoursebox").show(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnteacherincourse").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.activestudents")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnteacherpendingactivities").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.pendingactivities")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("button.dashboardbtnteacherpendingmessages").on("click",function(){e("div.dashboardcoursebox").show(),e("div.dashboardcoursebox").not(e("div.dashboardcoursebox.pendingmessages")).hide(),e("button.dashboardbtn").removeClass("eudeactive"),e(this).addClass("eudeactive")}),e("a.dashboardcourselink").on("click",function(t){e(this).closest("div.dashboardcoursebox.pending").length>0&&t.preventDefault()}),e("a.nav-link").on("click",function(t){e("li.nav-item").removeClass("active"),e(this).closest("li.nav-item").addClass("active");var a=e(this).attr("href");e(a).find("button.dashboardbtn.dashboardbtntotal").click()}),e(document).on("show.bs.tab",'.nav-tabs-responsive [data-toggle="tab"]',function(t){var a=e(t.target),o=a.closest(".nav-tabs-responsive"),n=a.closest("li"),s=n.closest("li.dropdown"),i=(n=s.length>0?s:n).next(),d=n.prev(),c=function(e,t){e.find(".dropdown-menu").removeClass("pull-xs-left pull-xs-center pull-xs-right").addClass("pull-xs-"+t)};o.find(">li").removeClass("next prev"),d.addClass("prev"),i.addClass("next"),c(d,"left"),c(n,"center"),c(i,"right")})})}}});